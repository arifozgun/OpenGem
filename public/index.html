<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenGem — Admin Dashboard</title>
    <meta name="description" content="Manage and monitor OpenGem accounts and usage statistics.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/admin.css">
    <link rel="icon" href="/logos/black.png" media="(prefers-color-scheme: light)">
    <link rel="icon" href="/logos/white.png" media="(prefers-color-scheme: dark)">
</head>

<body>
    <!-- Loading State -->
    <div id="loading-view" class="loading-screen">
        <div class="loading-spinner"></div>
        <p class="loading-text">Verifying session...</p>
    </div>

    <!-- Login View -->
    <div id="login-view" class="login-screen hidden">
        <div class="login-card">
            <div class="login-icon">
                <img src="/logos/black.png" alt="OpenGem Logo" width="48" height="48" style="object-fit: contain;">
            </div>
            <h1 class="login-title">OpenGem</h1>
            <p class="login-subtitle">Sign in to your admin dashboard</p>
            <form id="loginForm">
                <div class="form-group">
                    <label for="adminUsername">Username</label>
                    <input type="text" id="adminUsername" placeholder="Enter username" required autocomplete="username">
                </div>
                <div class="form-group">
                    <label for="adminPassword">Password</label>
                    <input type="password" id="adminPassword" placeholder="Enter password" required
                        autocomplete="current-password">
                </div>
                <button type="submit" class="btn btn-primary btn-full" id="loginBtn">Sign In</button>
                <div id="loginError" class="alert alert-error hidden">Invalid credentials or rate limit exceeded.</div>
            </form>
        </div>
    </div>

    <!-- Dashboard View -->
    <div id="dashboard-view" class="dashboard hidden">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <img src="/logos/black.png" alt="OpenGem Logo" width="28" height="28" style="object-fit: contain;">
                </div>
                <span class="sidebar-brand">OpenGem</span>
            </div>
            <nav class="sidebar-nav">
                <a href="#" class="nav-item active" data-page="overview">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <rect x="3" y="3" width="7" height="7" rx="1" />
                        <rect x="14" y="3" width="7" height="7" rx="1" />
                        <rect x="3" y="14" width="7" height="7" rx="1" />
                        <rect x="14" y="14" width="7" height="7" rx="1" />
                    </svg>
                    <span>Overview</span>
                </a>
                <a href="#" class="nav-item" data-page="accounts">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                        <circle cx="9" cy="7" r="4" />
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                        <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                    </svg>
                    <span>Accounts</span>
                </a>
                <a href="#" class="nav-item" data-page="keys">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path
                            d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4" />
                    </svg>
                    <span>API Keys</span>
                </a>
                <a href="#" class="nav-item" data-page="logs">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                        <polyline points="14 2 14 8 20 8" />
                        <line x1="16" y1="13" x2="8" y2="13" />
                        <line x1="16" y1="17" x2="8" y2="17" />
                    </svg>
                    <span>Request Logs</span>
                </a>
                <a href="#" class="nav-item" data-page="docs">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20" />
                        <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z" />
                        <line x1="9" y1="7" x2="16" y2="7" />
                        <line x1="9" y1="11" x2="16" y2="11" />
                        <line x1="9" y1="15" x2="13" y2="15" />
                    </svg>
                    <span>Documentation</span>
                </a>
                <a href="#" class="nav-item" data-page="chat">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z" />
                    </svg>
                    <span>Chat</span>
                </a>
                <a href="#" class="nav-item" data-page="settings">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <circle cx="12" cy="12" r="3" />
                        <path
                            d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z" />
                    </svg>
                    <span>Settings</span>
                </a>
            </nav>
            <div class="sidebar-footer">
                <button class="btn btn-ghost btn-full" id="logoutBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="1.5">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4" />
                        <polyline points="16 17 21 12 16 7" />
                        <line x1="21" y1="12" x2="9" y2="12" />
                    </svg>
                    <span>Sign Out</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Overview Page -->
            <section id="page-overview" class="page active">
                <div class="page-header">
                    <h1>Overview</h1>
                    <p class="page-desc">API usage summary and account performance</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-blue">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <polyline points="22 12 18 12 15 21 9 3 6 12 2 12" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Total Requests</span>
                            <span class="stat-value" id="stat-total">—</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-green">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                                <polyline points="22 4 12 14.01 9 11.01" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Success Rate</span>
                            <span class="stat-value" id="stat-success">—</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-purple">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" />
                                <circle cx="9" cy="7" r="4" />
                                <path d="M23 21v-2a4 4 0 0 0-3-3.87" />
                                <path d="M16 3.13a4 4 0 0 1 0 7.75" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Active Accounts</span>
                            <span class="stat-value" id="stat-accounts">—</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon stat-icon-orange">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <circle cx="12" cy="12" r="10" />
                                <polyline points="12 6 12 12 16 14" />
                            </svg>
                        </div>
                        <div class="stat-info">
                            <span class="stat-label">Tokens Used</span>
                            <span class="stat-value" id="stat-tokens">—</span>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h2>Account Performance</h2>
                    </div>
                    <div class="card-body">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Account</th>
                                    <th>Requests</th>
                                    <th>Success</th>
                                    <th>Failed</th>
                                    <th>Tokens</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody id="accountStatsBody">
                                <tr>
                                    <td colspan="6" class="table-empty">Loading statistics...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Accounts Page -->
            <section id="page-accounts" class="page">
                <div class="page-header">
                    <h1>Accounts</h1>
                    <button id="connectBtn" class="btn btn-secondary">
                        <img src="/icons/google.svg" alt="Google" width="18" height="18"
                            style="object-fit:contain; flex-shrink:0;">
                        Connect Account
                    </button>
                </div>

                <div class="card">
                    <div class="card-body">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Email</th>
                                    <th>Project ID</th>
                                    <th>Status</th>
                                    <th>Last Used</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="accountsBody">
                                <tr>
                                    <td colspan="5" class="table-empty">Loading accounts...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- API Keys Page -->
            <section id="page-keys" class="page">
                <div class="page-header">
                    <h1>API Keys</h1>
                    <button id="createKeyBtn" class="btn btn-primary">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <line x1="12" y1="5" x2="12" y2="19" />
                            <line x1="5" y1="12" x2="19" y2="12" />
                        </svg>
                        Create Key
                    </button>
                </div>

                <!-- Create Key Form (hidden by default) -->
                <div id="createKeyForm" class="card hidden" style="margin-bottom: 16px;">
                    <div class="card-body" style="padding: 20px;">
                        <div class="form-group" style="margin-bottom: 16px;">
                            <label for="newKeyName">Key Name</label>
                            <input type="text" id="newKeyName" placeholder="e.g. Production, My App">
                        </div>
                        <div style="display: flex; gap: 8px; justify-content: flex-end;">
                            <button class="btn btn-ghost" id="cancelCreateKey">Cancel</button>
                            <button class="btn btn-primary" id="confirmCreateKey">Generate Key</button>
                        </div>
                    </div>
                </div>

                <!-- New Key Display (shown after creation) -->
                <div id="newKeyDisplay" class="card hidden" style="margin-bottom: 16px;">
                    <div class="card-body" style="padding: 20px;">
                        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 14px;">
                            <span class="badge badge-active">Created</span>
                            <span style="font-size: 13px; color: var(--text-secondary);">Copy it now — it won't be shown
                                again</span>
                        </div>
                        <div
                            style="display: flex; align-items: center; gap: 12px; background: var(--bg); border: 1px solid var(--border); border-radius: var(--radius-sm); padding: 14px 16px;">
                            <code id="newKeyValue"
                                style="flex: 1; font-family: 'SF Mono', ui-monospace, Menlo, monospace; font-size: 13px; word-break: break-all; line-height: 1.5;"></code>
                            <button class="btn btn-primary" id="copyNewKey"
                                style="padding: 8px 14px; font-size: 13px; flex-shrink: 0;">Copy</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-body">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Key</th>
                                    <th>Created</th>
                                    <th>Requests</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="keysBody">
                                <tr>
                                    <td colspan="5" class="table-empty">Loading API keys...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Logs Page -->
            <section id="page-logs" class="page">
                <div class="page-header">
                    <h1>Request Logs</h1>
                    <button class="btn btn-secondary" id="refreshLogsBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2">
                            <polyline points="23 4 23 10 17 10" />
                            <path d="M20.49 15a9 9 0 1 1-2.12-9.36L23 10" />
                        </svg>
                        Refresh
                    </button>
                </div>

                <div class="card">
                    <div class="card-body">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Time</th>
                                    <th>Account</th>
                                    <th>Question</th>
                                    <th>Answer</th>
                                    <th>Tokens</th>
                                </tr>
                            </thead>
                            <tbody id="logsBody">
                                <tr>
                                    <td colspan="5" class="table-empty">Loading logs...</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Documentation Page -->
            <section id="page-docs" class="page">
                <div class="page-header">
                    <h1>API Documentation</h1>
                    <p class="page-desc">How to integrate with OpenGem</p>
                </div>

                <!-- Quick Reference -->
                <div class="doc-section">
                    <div class="doc-ref-grid">
                        <div class="doc-ref-item">
                            <div class="doc-ref-label">Base URL</div>
                            <code class="doc-code-inline" id="docBaseUrl">Loading...</code>
                        </div>
                        <div class="doc-ref-item">
                            <div class="doc-ref-label">Authentication</div>
                            <code class="doc-code-inline">Authorization: Bearer sk-your-api-key</code>
                            <p class="doc-ref-alt">or use query param <code
                                    class="doc-code-inline">?key=sk-your-api-key</code></p>
                        </div>
                        <div class="doc-ref-item">
                            <div class="doc-ref-label">Endpoint</div>
                            <div class="doc-ref-endpoint">
                                <span class="doc-method">POST</span>
                                <code class="doc-code-inline">/v1beta/models/{model}:generateContent</code>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Features: Streaming / System Prompt / Thinking -->
                <div class="doc-section">
                    <div class="doc-section-header">
                        <h2>Features</h2>
                        <div class="code-tabs">
                            <button class="code-tab active" data-lang="streaming">Streaming</button>
                            <button class="code-tab" data-lang="systemprompt">System Prompt</button>
                            <button class="code-tab" data-lang="thinking">Thinking</button>
                        </div>
                    </div>

                    <!-- Streaming -->
                    <div class="code-panel active" data-lang="streaming">
                        <p class="doc-panel-desc">
                            Use <code class="doc-code-inline">streamGenerateContent?alt=sse</code> for Server-Sent
                            Events streaming.
                        </p>
                        <div class="doc-code-block">
                            <div class="doc-code-label">Python — streaming</div>
                            <pre>for chunk in client.models.generate_content_stream(
    model="gemini-3.1-pro-preview",
    contents="Tell me a long story."
):
    print(chunk.text, end="", flush=True)</pre>
                        </div>
                    </div>

                    <!-- System Prompt -->
                    <div class="code-panel" data-lang="systemprompt">
                        <p class="doc-panel-desc">
                            Set <code class="doc-code-inline">systemInstruction.parts[0].text</code> in the request body
                            to define a persistent system prompt.
                        </p>
                        <div class="doc-code-block">
                            <div class="doc-code-label">Request body</div>
                            <pre>{
  "systemInstruction": { "parts": [{"text": "You are a helpful assistant."}] },
  "contents": [{"role": "user", "parts": [{"text": "Hello!"}]}]
}</pre>
                        </div>
                    </div>

                    <!-- Thinking -->
                    <div class="code-panel" data-lang="thinking">
                        <p class="doc-panel-desc">
                            Supported on <code class="doc-code-inline">gemini-3-pro-preview</code> and above. Response
                            parts with <code class="doc-code-inline">thought: true</code> are reasoning steps.
                        </p>
                        <div class="doc-code-block">
                            <div class="doc-code-label">Request body</div>
                            <pre>{
  "contents": [{"parts": [{"text": "Solve step by step: ..."}]}],
  "generationConfig": { "thinkingConfig": { "includeThoughts": true } }
}</pre>
                        </div>
                    </div>
                </div>

                <!-- Code Examples -->
                <div class="doc-section">
                    <div class="doc-section-header">
                        <h2>Code Examples</h2>
                        <div class="code-tabs">
                            <button class="code-tab active" data-lang="curl">cURL</button>
                            <button class="code-tab" data-lang="python">Python</button>
                            <button class="code-tab" data-lang="javascript">JavaScript</button>
                            <button class="code-tab" data-lang="langchain">LangChain</button>
                        </div>
                    </div>

                    <!-- cURL -->
                    <div class="code-panel active" data-lang="curl">
                        <div class="doc-code-block">
                            <pre>curl -X POST "<span class="doc-base-url">http://localhost:3050</span>/v1beta/models/gemini-3.1-pro-preview:generateContent?key=sk-your-api-key" \
  -H "Content-Type: application/json" \
  -d '{"contents": [{"parts": [{"text": "Hello!"}]}]}'</pre>
                        </div>
                    </div>

                    <!-- Python -->
                    <div class="code-panel" data-lang="python">
                        <div class="doc-code-block">
                            <div class="doc-code-label">pip install google-genai</div>
                            <pre>from google import genai

client = genai.Client(
    api_key="sk-your-api-key",
    http_options={'api_version': 'v1beta', 'url': '<span class="doc-base-url">http://localhost:3050</span>'}
)

response = client.models.generate_content(model="gemini-3.1-pro-preview", contents="Hello!")
print(response.text)</pre>
                        </div>
                    </div>

                    <!-- JavaScript -->
                    <div class="code-panel" data-lang="javascript">
                        <div class="doc-code-block">
                            <div class="doc-code-label">npm install @google/genai</div>
                            <pre>import { GoogleGenAI } from '@google/genai';

const ai = new GoogleGenAI({ apiKey: 'sk-your-api-key', baseUrl: '<span class="doc-base-url">http://localhost:3050</span>' });
const response = await ai.models.generateContent({ model: 'gemini-3.1-pro-preview', contents: 'Hello!' });
console.log(response.text);</pre>
                        </div>
                    </div>

                    <!-- LangChain -->
                    <div class="code-panel" data-lang="langchain">
                        <div class="doc-code-block">
                            <div class="doc-code-label">pip install langchain-google-genai</div>
                            <pre>from langchain_google_genai import ChatGoogleGenerativeAI

llm = ChatGoogleGenerativeAI(
    google_api_key="sk-your-api-key",
    client_options={"api_endpoint": "<span class="doc-base-url">http://localhost:3050</span>"},
    model="gemini-3.1-pro-preview"
)
print(llm.invoke("Hello!").content)</pre>
                        </div>
                    </div>
                </div>

                <!-- API Playground -->
                <div class="doc-section">
                    <h2 class="doc-section-title">API Playground</h2>
                    <p class="doc-section-subtitle">Test your API integration directly from the dashboard.</p>
                    <div class="playground-layout">
                        <div class="playground-input">
                            <div class="form-group" style="margin-bottom: 16px;">
                                <label for="pgApiKey">API Key</label>
                                <input type="password" id="pgApiKey" placeholder="Enter an API Key to test">
                            </div>
                            <div class="form-group" style="margin-bottom: 16px;">
                                <label for="pgModel">Model</label>
                                <select id="pgModel" class="doc-select">
                                    <option value="gemini-3.1-pro-preview">gemini-3.1-pro-preview</option>
                                    <option value="gemini-3-flash-preview">gemini-3-flash-preview</option>
                                    <option value="gemini-3-pro-preview" selected>gemini-3-pro-preview</option>
                                    <option value="gemini-2.5-flash">gemini-2.5-flash</option>
                                    <option value="gemini-2.5-pro">gemini-2.5-pro</option>
                                </select>
                            </div>
                            <div class="form-group" style="margin-bottom: 20px;">
                                <label for="pgMessage">Message</label>
                                <textarea id="pgMessage" rows="4" placeholder="Enter your prompt here..."
                                    class="doc-textarea"></textarea>
                            </div>
                            <button id="pgSendBtn" class="btn btn-primary btn-full">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2" style="margin-right: 6px;">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                </svg>
                                Send Request
                            </button>
                        </div>
                        <div class="playground-output">
                            <label class="doc-response-label">Response</label>
                            <div id="pgResponse" class="doc-code-block doc-response-block">
                                <div id="pgLoading" class="hidden doc-loading-overlay">
                                    <div class="loading-spinner" style="width: 24px; height: 24px;"></div>
                                    <span>Generating...</span>
                                </div>
                                <pre id="pgResponseContent" class="doc-response-pre">Awaiting response...</pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Models & Limits -->
                <div class="doc-section">
                    <h2 class="doc-section-title">Available Models</h2>
                    <p class="doc-section-subtitle">All supported Gemini models and their capabilities.</p>

                    <div class="doc-models-grid">
                        <div class="doc-model-card doc-model-new">
                            <div class="doc-model-header">
                                <code>gemini-3.1-pro-preview</code>
                                <span class="doc-model-badge doc-badge-new">NEW</span>
                            </div>
                            <p class="doc-model-desc">Advanced intelligence, complex problem-solving, agentic coding</p>
                        </div>
                        <div class="doc-model-card doc-model-new">
                            <div class="doc-model-header">
                                <code>gemini-3-flash-preview</code>
                                <span class="doc-model-badge doc-badge-new">NEW</span>
                            </div>
                            <p class="doc-model-desc">Frontier-class performance at a fraction of the cost</p>
                        </div>
                        <div class="doc-model-card doc-model-new">
                            <div class="doc-model-header">
                                <code>gemini-3-pro-preview</code>
                                <span class="doc-model-badge doc-badge-new">NEW</span>
                            </div>
                            <p class="doc-model-desc">State-of-the-art reasoning with advanced multimodal understanding
                            </p>
                        </div>
                        <div class="doc-model-card">
                            <div class="doc-model-header">
                                <code>gemini-2.5-flash</code>
                                <span class="doc-model-badge">Gemini 2.5</span>
                            </div>
                            <p class="doc-model-desc">Best price-performance for low-latency, high-volume reasoning</p>
                        </div>
                        <div class="doc-model-card">
                            <div class="doc-model-header">
                                <code>gemini-2.5-flash-lite</code>
                                <span class="doc-model-badge">Gemini 2.5</span>
                            </div>
                            <p class="doc-model-desc">Fastest and most budget-friendly multimodal model</p>
                        </div>
                        <div class="doc-model-card">
                            <div class="doc-model-header">
                                <code>gemini-2.5-pro</code>
                                <span class="doc-model-badge">Gemini 2.5</span>
                            </div>
                            <p class="doc-model-desc">Most advanced for complex tasks, deep reasoning and coding</p>
                        </div>
                        <div class="doc-model-card doc-model-deprecated">
                            <div class="doc-model-header">
                                <code>gemini-2.0-flash</code>
                                <span class="doc-model-badge doc-badge-deprecated">Deprecated</span>
                            </div>
                            <p class="doc-model-desc">Second generation workhorse, native tool use, 1M context</p>
                        </div>
                        <div class="doc-model-card doc-model-deprecated">
                            <div class="doc-model-header">
                                <code>gemini-2.0-flash-lite</code>
                                <span class="doc-model-badge doc-badge-deprecated">Deprecated</span>
                            </div>
                            <p class="doc-model-desc">Fastest second generation, optimized for cost efficiency</p>
                        </div>
                    </div>

                    <div class="doc-limits-bar">
                        <div class="doc-limit-item">
                            <strong>120 req/min</strong> <span>per IP</span>
                        </div>
                        <div class="doc-limit-item">
                            <strong>5 logins</strong> <span>per 15 min per IP</span>
                        </div>
                        <div class="doc-limit-item">
                            <span>Exhausted accounts are automatically skipped.</span>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Chat Page -->
            <section id="page-chat" class="page">
                <div class="page-header">
                    <h1>Chat</h1>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <select id="chatModelSelect" class="chat-model-selector">
                            <option value="gemini-3.1-pro-preview">gemini-3.1-pro-preview</option>
                            <option value="gemini-3-flash-preview">gemini-3-flash-preview</option>
                            <option value="gemini-3-pro-preview" selected>gemini-3-pro-preview</option>
                            <option value="gemini-2.5-flash">gemini-2.5-flash</option>
                            <option value="gemini-2.5-pro">gemini-2.5-pro</option>
                        </select>
                        <button class="btn btn-secondary" id="newChatBtn">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <line x1="12" y1="5" x2="12" y2="19" />
                                <line x1="5" y1="12" x2="19" y2="12" />
                            </svg>
                            New Chat
                        </button>
                    </div>
                </div>

                <div class="chat-container">
                    <div class="chat-messages" id="chatMessages">
                        <div class="chat-welcome" id="chatWelcome">
                            <div class="chat-welcome-logo">
                                <img src="/icons/gemini.png" alt="Gemini" width="52" height="52"
                                    style="object-fit: contain;">
                            </div>
                            <h2>How can I help you today?</h2>
                            <p>Choose a model above and start chatting with Gemini AI through your OpenGem gateway.</p>
                            <div class="chat-suggestions">
                                <button class="chat-suggestion-chip"
                                    data-prompt="Explain how OpenGem proxies Gemini API requests.">How does OpenGem
                                    work?</button>
                                <button class="chat-suggestion-chip"
                                    data-prompt="Write a short Python script that calls the Gemini API.">Python API
                                    example</button>
                                <button class="chat-suggestion-chip"
                                    data-prompt="What are the differences between Gemini 3 Pro and Gemini 2.5 Pro?">Compare
                                    Gemini models</button>
                                <button class="chat-suggestion-chip"
                                    data-prompt="Show me how to use streaming with the Gemini API.">Streaming
                                    example</button>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-area chatgpt-input-area">
                        <div class="chat-input-wrap chatgpt-input-wrap">
                            <textarea id="chatInput" rows="1" placeholder="Message Gemini..."
                                autocomplete="off"></textarea>
                            <button class="chat-send-btn" id="chatSendBtn">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                    stroke-width="2">
                                    <line x1="22" y1="2" x2="11" y2="13"></line>
                                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                                </svg>
                            </button>
                        </div>
                        <p class="chat-disclaimer">Gemini can make mistakes. Check important info.</p>
                    </div>
                </div>
            </section>

            <!-- Settings Page -->
            <section id="page-settings" class="page">
                <div class="page-header">
                    <h1>Settings</h1>
                    <p class="page-desc">Server configuration and database management</p>
                </div>

                <!-- Database Backend Card -->
                <div class="card" style="margin-bottom: 16px;">
                    <div class="card-header">
                        <h2>Database Backend</h2>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <div class="db-status-row">
                            <div class="db-status-info">
                                <div class="db-status-label">Current Backend</div>
                                <div class="db-status-value" id="currentDbBackend">
                                    <span class="loading-dots">Loading...</span>
                                </div>
                            </div>
                            <button class="btn btn-secondary" id="switchDbBtn">Switch Backend</button>
                        </div>
                        <div class="db-backend-note" id="dbBackendNote"></div>
                    </div>
                </div>

                <!-- Privacy Mode Card -->
                <div class="card" style="margin-bottom: 16px;">
                    <div class="card-header">
                        <h2>Privacy Mode</h2>
                    </div>
                    <div class="card-body" style="padding: 20px;">
                        <div class="db-status-row">
                            <div class="db-status-info">
                                <div class="db-status-label">Email Censoring</div>
                                <div class="db-status-value" style="font-size: 13px; color: var(--text-secondary);">
                                    Email adreslerini sansürler. Ekran paylaşımı ve ekran görüntüleri için güvenli.
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="privacyToggle">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="privacy-preview" id="privacyPreview">
                            <code>example@gmail.com</code> → <code>e*****@gmail.com</code>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Database Switch Modal -->
    <div id="dbSwitchModal" class="modal-overlay hidden">
        <div class="modal-box">
            <div class="modal-header">
                <h2 id="dbModalTitle">Switch Database Backend</h2>
                <button class="modal-close" id="dbModalClose">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="modal-warning">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path
                            d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z" />
                        <line x1="12" y1="9" x2="12" y2="13" />
                        <line x1="12" y1="17" x2="12.01" y2="17" />
                    </svg>
                    <span>All accounts and logs will be migrated automatically. <strong>API keys cannot be
                            migrated</strong> — you will need to regenerate them after switching.</span>
                </div>

                <!-- Firebase fields (shown when switching TO firebase) -->
                <div id="modalFirebaseFields" class="hidden">
                    <p
                        style="font-size: 13px; color: var(--text-secondary); margin-bottom: 16px; display:flex; align-items:center; gap:8px;">
                        <img src="/icons/firebase.png" alt="Firebase" width="16" height="16"
                            style="object-fit:contain; flex-shrink:0;">
                        Enter your Firebase project configuration:
                    </p>
                    <div class="modal-form-grid">
                        <div class="form-group">
                            <label for="mfb-apiKey">API Key <span style="color:var(--red)">*</span></label>
                            <input type="text" id="mfb-apiKey" placeholder="AIzaSy...">
                        </div>
                        <div class="form-group">
                            <label for="mfb-authDomain">Auth Domain <span style="color:var(--red)">*</span></label>
                            <input type="text" id="mfb-authDomain" placeholder="app.firebaseapp.com">
                        </div>
                        <div class="form-group">
                            <label for="mfb-projectId">Project ID <span style="color:var(--red)">*</span></label>
                            <input type="text" id="mfb-projectId" placeholder="your-project-id">
                        </div>
                        <div class="form-group">
                            <label for="mfb-storageBucket">Storage Bucket <span
                                    style="color:var(--red)">*</span></label>
                            <input type="text" id="mfb-storageBucket" placeholder="app.appspot.com">
                        </div>
                        <div class="form-group">
                            <label for="mfb-messagingSenderId">Messaging Sender ID <span
                                    style="color:var(--red)">*</span></label>
                            <input type="text" id="mfb-messagingSenderId" placeholder="123456789">
                        </div>
                        <div class="form-group">
                            <label for="mfb-appId">App ID <span style="color:var(--red)">*</span></label>
                            <input type="text" id="mfb-appId" placeholder="1:123:web:abc">
                        </div>
                    </div>
                    <div
                        style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--border); text-align: center;">
                        <button type="button" class="btn btn-ghost" id="modalPasteJsonBtn" style="font-size: 13px;">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2" />
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1" />
                            </svg>
                            Paste Firebase Config JSON
                        </button>
                    </div>
                </div>

                <div id="modalSwitchError" class="alert alert-error hidden" style="margin-top: 12px;"></div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" id="dbModalCancel">Cancel</button>
                <button class="btn btn-primary" id="dbModalConfirm">Confirm Switch</button>
            </div>
        </div>
    </div>

    <!-- Log Detail Modal -->
    <div id="logDetailModal" class="modal-overlay hidden">
        <div class="modal-box log-detail-modal">
            <div class="modal-header">
                <h2>Request Log Detail</h2>
                <button class="modal-close" id="logDetailClose">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18" />
                        <line x1="6" y1="6" x2="18" y2="18" />
                    </svg>
                </button>
            </div>
            <div class="modal-body" id="logDetailBody">
                <!-- Populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Marked for Markdown parsing -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="/admin.js"></script>
</body>

</html>